# 实验名称：区块链模拟实验
# 姓名:蔡政洋
# 学号 ：42123024
# 课程教师：
# 完成时间
## 提交地址：https://classroom.github.com/a/czOTLRJe

  
<div style="page-break-after: always;"></div>

## 实验计划  
>### Ⅰ.准备
>#### 安装试验环境  
>### Ⅱ.平台步
>#### 1)将blcokchain.py节点改为Ipv4的参数运行（本次试验均使用手机热点作为局域网）  
>#### 2)运行预定程序  
>#### 3)打开Blockchain Frontend  
>#### 4)添加另外一个节点  
>### Ⅲ.交易步
>#### 1)将blockchain_client.py节点改为同ipv4参数，生成两个账户，运行程序  
>#### 2)进入Blockchain Client,查看钱包
>#### 3)两个账户间通过之前的节点进行交易  
>#### 4)Blockchain Frontend刷新节点，挖矿  
>### Ⅳ.攻击
>#### 1)在两个节点上分别同时记录两笔不同的交易
>#### 2)在其中一个节点上进行挖矿，使其产生新的交易记录
>#### 3)再在另一个节点上进行挖矿，使其记录的交易数目超过原有的交易数目，成为新的主链
>#### 4)在最初的节点上刷新交易记录，发现原有的交易被新的主链上的交易记录所覆盖   

## 实验过程    

### 一、Blockchain 环境安装
>#### (1）安装flask库：pip install flask，pip install flask_cors
>#### (2）安装Crypto： pip install Crypto  

### 二、建立节点：运行blockchain.py  
>### 打开方式：
>#### 1.使用jupyter notebook，具体操作如下：
>新建jupyter终端
>可修改端口，现以192.168.43.187:5000为例
>cd (blockchain.py 的文件路径)blockchain
>输入：python blockchain.py   
>![untitled.png](attachment:untitled.png)
>#### 2.使用 Spyder 打开，具体操作如下：
>可修改端口
>直接打开blockchain.py文件  
>![untitled1.png](attachment:untitled1.png) 

### 三、根据端口值，进入Blockchain Frontend 界面
>![untitled2.png](attachment:untitled2.png)
 
### 四、挖矿
>点击Mine
>![untitled3.png](attachment:untitled3.png)

 ### 五、添加其他节点
>#### 点击右上角Configure   
![untitled4.png](attachment:untitled4.png)
>#### 输入其他节点端口值进行添加：192.168.43.187:5001   
![untitled5.png](attachment:untitled5.png)
>#### 先同步5000端口，再在5001节点上进行挖矿操作  
![untitled6.png](attachment:untitled6.png)
>#### 可以看到，矿机地址前4个是5000，后两个是5001，说明同步



### 六、交易
>#### （由于与前面实验环境不一样，造成与前面ip地址有差异，但不影响实验成果的展示）
>### 1.首先通过jupyter终端运行blockchain.py，新建节点：http://192.168.101.101:5000/
>### ![untitled7.png](attachment:untitled7.png)
>### 2.再通过jupyter终端运行blockchain_client.py,建立交易端口：http://192.168.101.101:8000/
>### ![untitled8.png](attachment:untitled8.png)
>### 3可以通过Wallet Generator中的Generate Wallet按钮产生公钥和私钥，如下图。
>### ![untitled9.png](attachment:untitled9.png)
>### 4.进入Make Transaction界面进行交易，需要输入交易发送方的地址和其私钥、交易接收方的地址、交易的数量。
>### ![untitled10.png](attachment:untitled10.png)
>### 5.点击Genarate Transaction，将节点更改为前面创立的节点：http://192.168.101.101:5000/， 并单击Confirm Transaction确认交易，出现交易成功界面。
>### ![untitled11.png](attachment:untitled11.png)
>### ![untitled12.png](attachment:untitled12.png)
>### 6.在节点：http://192.168.101.101:5000/ 中刷新界面， 可以看到上面的交易已经被记录在下一个区块中。
>### ![untitled13.png](attachment:untitled13.png)


### 七、攻击
>### 1.承接上面的交易内容，创立新节点：http://192.168.101.101:5001/
>### ![untitled14.png](attachment:untitled14.png)
>### 2. 在交易端口：http://192.168.101.101:8000/ 进行一笔新的交易，使用与上面交易相同的Sender Adress和Sender Private Key，并使交易金额相同，但Recipient Adress不同。
>### ![untitled15.png](attachment:untitled15.png)
>### 3.将此交易记录在节点http://192.168.101.101:5001/ 处。
>### ![untitled16.png](attachment:untitled16.png)
>### 4.在节点http://192.168.101.101:5001/ 处刷新可以查看到此次交易。
>### ![untitled17.png](attachment:untitled17.png)
>### 5. 关联http://192.168.101.101:5000/ 和http://192.168.101.101:5001/ 节点
>### ![untitled18.png](attachment:untitled18.png)
>### 6.在http://192.168.101.101:5001/ 节点挖一次矿，可以观察到在该条链上已经记录了两次交易。
>### ![untitled19.png](attachment:untitled19.png)
>### 7.在http://192.168.101.101:5000/ 节点上挖两次矿，可以观察到在该节点上已经记录了三笔交易，其区块链长度已经超过http://192.168.101.101:5001/ 节点，成为了新的主链。
>### ![untitled20.png](attachment:untitled20.png)
>### 8.在http://192.168.101.101:5001/ 节点上刷新区块链交易，发现其原有的记录交易被主链所记录的交易覆盖，实现了简单的双花攻击。
>### ![untitled21.png](attachment:untitled21.png)



## 实验结果   
>### 1.成功建立节点![untitled22.png](attachment:untitled22.png) 
>### 2.成功完成交易![untitled23.png](attachment:untitled23.png)
>### 3.成功实现双花攻击![untitled24.png](attachment:untitled24.png)

## 实验总结  
>总体来说，区块链的实质就是一个**账本**，一个兼具开放与封闭性的账本。**开放**，是指每个人都可以参与其中，查阅账本，进行记账；而**封闭性**是指，并非每个人的记账都会被收录其中，换言之，并非每个人都会在其中起到作用。账本采用的是竞争记账制度，可类比为比赛的过程。当一个新的任务发布后，每个人都可以用自己的设备，进行计算，也就是我们常说的“挖矿”。当系统自动判定出最优解之后，所有设备都会被强制性同步此条记录，解出最优解的人便是此次记账的胜者，获得奖励。在其中还有一个最为关键的问题，便是信息的加密技术。在区块链的加密中，采用的是非对称的SHA256（函数）加密。每条信息都会生成一个信息所对应的哈希值，每条信息也同时具有私钥和公钥，类似于修改权限与查看权限，信息作者可以根据自己的需要选择公布不同的密钥。这使区块链的真实性与安全性得到保证，此外，若想要攻击已有的区块链，则必须改正超过半数以上的账本数据，这在目前几乎是难以做到的。


>### 失败原因分析
>#### 1.python环境问题
   首先遇到了命令提示符找不到python的问题（确认python安装成功），通过修改系统环境变量得以解决  
   ![untitled25.png](attachment:untitled25.png)  
>#### 2.区块链运作机制的不熟悉
   起初对实现攻击的方法不是很熟悉，通过研读bitcoin白皮书，理解攻击方式
>#### 3.python外置库的缺失与安装遇到问题
   运行代码需要安装*flask*，*flask_cors*和*Crypto*库，安装Cpypto库之后无法调用，将安装文件*crypto*改成*Crypto*后成功解决。   
>#### 4.代码最后IP地址的修改  
>#### 5.实现联机交易出现问题，无法相互访问。  
   需要处于一个局域网下；当节点为127.0.0.1（本机）时，不可实现两台机器交易，在改为电脑ip地址时无法相互访问，经探讨发现时防火墙问题，在关闭防护墙之后可以实现联机，相互访问。考虑到安全问题，通过电脑之间连接同一个局域网实现联机交易，同步。
>### 收获与总结  
>&emsp;在金融科技教授区块链的第一节课上，曹老师询问了我们关于区块链最感兴趣的问题.。根据陈老师统计的数据发现：**排名第二，出现频数为11的便是区块链与虚拟货币的关系。**  通过课下阅读中本聪《比特币白皮书》以及查阅相关资料文献，我们对于区块链与比特币有了初步的了解。 

>><font color=##0099ff size=3>区块链并不等同于比特币，比特币仅是区块链的一种重要的呈现形式。</font>  
>><font color=##0099ff size=3>总体来说，区块链的实质就是一个账本，一个兼具开放与封闭性的账本。</font>  
>&emsp;开放，是指每个人都可以参与其中，查阅账本，进行记账；而封闭性是指，并非每个人的记账都会被收录其中，换言之，并非每个人都会在其中起到作用。  
>&emsp;账本采用的是竞争记账制度，可类比为比赛的过程。  
>&emsp;当一个新的任务发布后，每个人都可以用自己的设备，进行计算，也就是我们常说的**“挖矿”**。当系统自动判定出最优解之后，所有设备都会被强制性同步此条记录，解出最优解的人便是此次记账的胜者，获得奖励。在其中还有一个最为关键的问题，便是信息的加密技术。在区块链的加密中，采用的是非对称的SHA256（）函数加密。每条信息都会生成一个信息所对应的哈希值，每条信息也同时具有私钥和公钥，类似于修改权限与查看权限，信息作者可以根据自己的需要选择公布不同的密钥。这使区块链的真实性与安全性得到保证，此外，若想要攻击已有的区块链，则必须改正超过半数以上的账本数据，这在目前几乎是难以做到的.

>&emsp;通过为期两周的理论学习，我们对“大智移云区”中的区块链有了更深一步的感知与理解。了解到区块链与比特币的搜索热度在近几年逐渐上升，且近期区块链的搜索热度逐渐超过了比特币。  
>&emsp;区块链的核心在于- -**去中心化**，SHA256（）函数以及非对称加密技术等凸显了**区块链的安全、不可篡改、可访问以及无第三方等特点。**  
>通过上机操作，我们小组合作，完成了私链的建立以及交易、攻击等，在讨论与相互学习过程中加深了对于区块链知识的印象，也激发了我们探究其未来应用的极大兴趣。  

## 自我评价
>#### 小组自我评价均分 8.5分
   经过两周对区块链的学习，我们对它已经有了初步的了解和探索，在互联网科技飞速发展的今天，对新事物新技术的探索是必不可少的，通过课堂和实验，不仅帮助我们了解了区块链的运作机制，同时沟通了小组同学间的合作与默契，让我们受益匪浅。  
   我们将自我评价分为两个部分，第一个部分是理论实操，第二个部分是小组合作。  
   1.理论实操（8分）：在理论学习和实际操作的过程中，我们遇到了许多问题，甚至一次次导致了实验的失败，但经过小组的分工协作，我们最终完成了实私链的建立、交易和攻击，也对区块链的应用进行了探索，激发了大家对区块链技术更浓厚的兴趣。  
   2.小组合作（9分）：分工合作的力量是强大的，它帮助我们发挥各自的长处，在实验过程中互相学习成长，在谈论探索中碰撞思维与想法，所以实验的成功离不开组员共同的努力。


```python

```
